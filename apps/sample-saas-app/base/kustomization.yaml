apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - backend-deployment.yaml
  - frontend-deployment.yaml
  - init-db-job.yaml

commonLabels:
  app.kubernetes.io/managed-by: flux
  app.kubernetes.io/part-of: sample-saas-app

# Image tags are updated automatically by CI/CD pipeline
# The CD pipeline in Sample-saas-app updates these tags when new images are built
images:
  - name: task-management-backend
    newName: 821368347884.dkr.ecr.us-east-1.amazonaws.com/saas-infra-lab-dev-backend
    newTag: latest  # Updated by CI/CD pipeline
  - name: task-management-frontend
    newName: 821368347884.dkr.ecr.us-east-1.amazonaws.com/saas-infra-lab-dev-frontend
    newTag: latest  # Updated by CI/CD pipeline
